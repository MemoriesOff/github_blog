---
layout: post
title: 等离子扬声器的制作
tags:  逆变电路 等离子扬声器
categories: 物理实验竞赛
published: false
---

等离子扬声器的基本原理是用高压产生电弧电离空气,并驱动电离的空气振动从而发声的装置.主要由信号发生与调制电路、逆变电路、高频高压变压器等组成

#原理介绍

在正常情况下，气体分子不带电，但在强电场的作用下，空气中的气体分子会失去一些电子，即所谓空气电离，这些失去的电子称为自由电子，它又会与其它中性分子相结合而得到电子的气体分子带负电。  

电离的带正负电的空气会分别向两极移动，从而使空气产生振动。

#变压器的频率特性 

*当输入电压固定时，频率越低，铁心越容易饱和，输出电压越低  
*变压器线圈相当于电感，频率越高，感抗越大，漏抗压降变大，输出电压降低   

综合上述两点，其频率-电压关系如图。  

![](http://ifeve.com/wp-content/uploads/2013/06/overview-channels-buffers.png)

为了减少能量的浪费，获得最高的电压，我们选取图中最高点所对应的频率作为调制时的基波频率。

#信号发生与调制电路

将高频的基波与声音信号相乘产生最后驱动mos管的信号，为了保证mos始终处于完全开通或关断状态,基波信号整流为方波，声音信号也整流为方波，这样保证输出信号始终为方波。

电路如上图所示，其中8、7脚上的电阻和6脚上的电容来控制输出频率，rst脚控制波形的产生与否从而实现调制  

555输出接三极管推挽输出增强带载能力，

#查找左右边沿
从上一次的中点向左右两边扫，如果黑点的一定范围内黑点的个数满足要求，则判定该点为左右边线  
     
程序以左侧为例：
```c
for(temp0=centre_lastblack;temp0>5;temp0--)               //检测左侧边沿
{
  if(point[temp0]>FAV)
  {
      continue;
  }
  for(temp1=temp0; temp1>( temp0-LINEWITH );temp1--)      //确认该点附近的黑点数是否满足要求
  {    
      if(point[temp1]<FAV)
          leftcount++;
  }    
  if(leftcount >= LINEWITH-DEVIATION )                        //判断是否满足边沿条件
  {
    leftedge = temp0 ;                                  //满足条件边沿找到
    leftflag=1;                                         //找到边沿，标志位置1 
    break;
  }
  else
  {
    leftcount=0;                                        //未找到清除计数  
    leftflag=0;                                         //未找到边沿，标志位置0
    leftedge=5;                                         // 边沿赋值 
  }
   
  if(leftedge<5) leftedge = 5;   
} 
```
由于摄像头采集到的数据边沿不准确，故最低值为5.  
     
#中点计算  

对中点计算分为以下三种情况：
*左右均寻到
*仅寻到左线与右线
*左右线均未寻到
对于左右都寻到的情况，相加取平均是一种最简单的方法。  
    
仅寻到左线与右线时，以寻到的线的位置为基准，加减线宽的一半。

左右线都未寻到，默认上次中值  

值得说明的是，上述中点计算仅针对正常双线情况，对于存在赛道元素干扰的情况参见。
    
* * *
    
整车程序：[https://github.com/MemoriesOff/Freescale](https://github.com/MemoriesOff/Freescale)

为说明方便，文章中程序段与整车程序略有不同。
      
